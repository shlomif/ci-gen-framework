#!/usr/bin/env perl6

use Config::INI;
use Getopt::Long;

use CI::Gen;
my %params;
my $o = Getopt::Long.new(
    'basedir=s',
    'param=s%',
    'theme=s',
);
my $ret = $o.get-options(@*ARGS);
my $ini = ".ci-gen.ini";
if (IO::Path.new($ini).e)
{
    my %h = Config::INI::parse_file($ini);
    $ret = {|%h<_>, |%h{%h.keys.grep: -> $x {$x ne '_'}}:kv, |$ret};
}
CI::Gen::CI-Gen.new(basedir=>($ret.{'basedir'}||'.'), params=>$ret.{'param'}.hash, theme=>$ret.{'theme'}).generate("foo");
